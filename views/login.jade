extend layout

block content
  div.container
    div.header.clearfix
        nav
            ul(class='nav nav-pills pull-right')
                li(role='presentation',class='active')
                    a(href='/')
                        i(class="fa fa-home")
                        span  Index
                li(role='presentation')
                    a(href='/insert-metrics')
                        i(class="fa fa-plus")
                        span  Insert metrics
                li(role='presentation')
                    a(href='/display-metrics')
                        i(class="fa fa-pie-chart")
                        span  Display metrics
        h3 ExpressJS Lab
    if !connected
        div(class="alert alert-danger",role="alert")
                button(type="button",class="close",data-dismiss="alert",aria-label="Close")
                    span(aria-hidden="true") &times;
                b Error!
                p Your login credentials are not correct.
                    i(class="fa fa-cross")
    div.jumbotron
        h1
            i(class="fa fa-flask")
            span  ExpressJS Lab
        p
            i(class="fa fa-sign-in")
            span  Connection form
        form(name="login", action="/login", method="post")
            div.form-group
              label(for="user") User
              input(type="text", name="user", id="user", class="form-control")
            div.form-group
              label(for="pass") Password
              input(type="password", name="pass", id="pass", class="form-control")
            div.form-group
              button(type="submit", class="btn btn-success btn-sm") Valider

        p Just bellow, a set of login/password which can be used to connect
        table(class="table table-condensed table-bordered table-hover",style="text-align:left")
            thead
                tr
                    th Login
                    th Password

            tbody
                tr
                    td admin
                    td password

  script
    :coffee-script
      $('#get-metrics').click (e) ->
        e.preventDefault()
        $.getJSON '/metrics.json', (data) ->
          $('#content').empty()
          c = "<table class=\"table table-bordered table-hover\"><thead><tr><th>TIMESTAMP</th><th>VALUE</th></tr></thead><tbody>"
          for metric in data
            c += "<tr><td>timestamp: #{metric.timestamp}</td><td>value: #{metric.value}</td></tr>"
            c += "</tbody></table>"
          $('#content').append c